#autoload

#Define global values
if (( ! $+GRIMOIRE_DIR )); then
    typeset `cat /etc/sorcery/config|grep " GRIMOIRE_LIST="`
    typeset -gA GRIMOIRE_DIR
    . $GRIMOIRE_LIST
fi

# load spell's list
typeset _spells_list
for i in $GRIMOIRE_DIR
_spells_list=(
    $_spells_list
    $( /bin/ls -d $GRIMOIRE_DIR/*/*(-/)|sed 's+.*/++' )
)

# Check are there spells, or not.
if [[ "$_spells_list" != . ]]; then
    compadd -P '' $_spells_list
else
    false
fi
