. $GRIMOIRE/FUNCTIONS                                                 &&
if [[ $PROFTPD_DEVEL == "n" ]]; then
  if [[ $(get_sorcery_kernel_config CONFIG_SECURITY) != y ]]; then
    config_query_option PROFTPD_CAPS                                  \
    "You don't have capabilities enabled in your kernel, do you still \
 want to build them?" n "" "--disable-cap"                            
  fi
fi                                                                    &&

#rest of the file still needs to be rewritten properly
if  !  grep  -q  'CONFIGURED=\"y\"'  ${DEPENDS_CONFIG}/proftpd;  then
  if  query  "enable IPv6 support? " n;  then
    echo  'OPTS="${OPTS} --enable-ipv6"'  >>  ${SPELL_CONFIG}
  fi

  if  query  "Choose optional user contributed modules to install? " n;  then
    if  query  "Include support for RADIUS (RFC2865) authentication and accounting? " n;  then
      echo  'OPTS="${OPTS} --with-modules=mod_radius"'  >>  ${SPELL_CONFIG}
    fi

    if  query  "Include support for user upload/download ratios? " n;  then
      echo  'OPTS="${OPTS} --with-modules=mod_ratio"'  >>  ${SPELL_CONFIG}
    fi

    if  query  "Include support for displaying \"readme\" files (controlled by the \"DisplayReadme\" directive)? " n;  then
      echo  'OPTS="${OPTS} --with-modules=mod_readme"'  >>  ${SPELL_CONFIG}
    fi

    if  query  "Include support for powerful regular expression-based command parameter rewrite engine? " n;  then
      echo  'OPTS="${OPTS} --with-modules=mod_rewrite"'  >>  ${SPELL_CONFIG}
    fi

    if  query  "Include support for SSL/TLS authentication/encryption? " n;  then
      echo  'OPTS="${OPTS} --with-modules=mod_tls"'  >>  ${SPELL_CONFIG}
    fi

    if  query  "Include support for TCP Wrappers? " n;  then
      echo  'OPTS="${OPTS} --with-modules=mod_wrap"'  >>  ${SPELL_CONFIG}
    fi
  fi

  echo  'CONFIGURED="y"'  >>  ${SPELL_CONFIG}
fi
