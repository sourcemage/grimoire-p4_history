if [ "$( gunzip -c /proc/config.gz | grep 'CONFIG_DRM=y' )" ]; then
    echo "Sorry you have DRM support builtin recompile your kernel and remove since this spell makes it's own modules"
    exit 1
elif [ "$( grep 'CONFIG_DRM=y' /etc/sorcery/local/kernel.config )" ]; then
    echo "Sorry you have DRM support builtin recompile your kernel and remove since this spell makes it's own modules"
    exit 1
elif [ "$( grep 'CONFIG_DRM=y' /usr/src/linux/.config )" ]; then
    echo "Sorry you have DRM support builtin recompile your kernel and remove since this spell makes it's own modules"
    exit 1
fi &&

mk_source_dir  ${SOURCE_DIRECTORY}      &&
chmod a+rw ${SOURCE_DIRECTORY}          &&
cd  ${SOURCE_DIRECTORY}                 &&
unpack  ${SOURCE}  ${MD5[0]}            &&
unpack  ${SOURCE2}  ${MD5[1]}           &&
sedit "s:\(#define MesaSrcDir\).*:\1 ${SOURCE_DIRECTORY}/Mesa-Trunk:" ${SOURCE_DIRECTORY}/xc-Trunk/xc/config/cf/host.def
sedit "s:\(#define DRMSrcDir\).*:\1 ${SOURCE_DIRECTORY}/drm-Trunk:" ${SOURCE_DIRECTORY}/xc-Trunk/xc/config/cf/host.def

