cd ${LINUX_SOURCE_DIRECTORY} &&
# make the append
mkdir -p ${INSTALL_ROOT}/boot &&
case "$VERSION" in
	2.[0246]*)
		message "${MESSAGE_COLOR}installing for a 2.x kernel${DEFAULT_COLOR}" &&
		ARCH="$kernel_arch" make modules_install &&
		;;
	*)
		message "${PROBLEM_COLOR}I again don't know what version: $VERSION is${DEFAULT_COLOR}" &&
		return 1
		;;
esac &&
message "${MESSAGE_COLOR}Copying and linking kernel${DEFAULT_COLOR}" &&
case  ${kernel_arch}  in
	ppc)
		cp ${LINUX_SOURCE_DIRECTORY}/vmlinux \
		${INSTALL_ROOT}/boot/vmlinux-$VERSION &&
		ln -sf ${INSTALL_ROOT}/boot/vmlinux-${VERSION} \
		${INSTALL_ROOT}/boot/vmlinux
		;;
	sparc*)
		gzip -c9 ${LINUX_SOURCE_DIRECTORY}/vmlinux > \
		${INSTALL_ROOT}/boot/vmlinuz-$VERSION &&
		ln -sf ${INSTALL_ROOT}/boot/vmlinuz-${VERSION} \
		${INSTALL_ROOT}/boot/vmlinuz
		;;
	*)
		cp ${LINUX_SOURCE_DIRECTORY}/arch/${kernel_arch}/boot/bzImage \
		${INSTALL_ROOT}/boot/vmlinubz-$VERSION &&
		ln -sf ${INSTALL_ROOT}/boot/vmlinubz-${VERSION} \
		${INSTALL_ROOT}/boot/vmlinubz
	;;
esac &&
message "${MESSAGE_COLOR}Copying and linking System.map${DEFAULT_COLOR}" &&
cp ${LINUX_SOURCE_DIRECTORY}/System.map ${INSTALL_ROOT}/boot/System.map-${VERSION} &&
ln -sf ${INSTALL_ROOT}/boot/System.map-${VERSION} \
	${INSTALL_ROOT}/boot/System.map &&
message "${MESSAGE_COLOR}Copying and linking .config${DEFAULT_COLOR} &&
cp ${LINUX_SOURCE_DIRECTORY}/.config ${INSTALL_ROOT}/boot/config-${VERSION} &&
ln -sf ${INSTALL_ROOT}/boot/config-${VERSION} \
	${INSTALL_ROOT}/boot/config &&

cd ${BUILD_DIRECTORY} &&
rm linux &&
ln -sfn `basename ${LINUX_SOURCE_DIRECTORY}` linux 

