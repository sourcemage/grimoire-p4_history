#!/bin/sh

PROGRAM=/usr/sbin/sshd
RUNLEVEL=1

. /etc/init.d/smgl_init

start() {
  echo "Starting sshd..."
  $PROGRAM
  sleep 1
  if [ -e /var/run/sshd.pid ]; then
    ps -p `cat /var/run/sshd.pid` > /dev/null  && evaluate_retval
  else
    print_status failure
    exit 1
  fi
}

reload() {
  # reloadproc causes loss of connection when remotely connected
  echo "Reloading sshd..."
  if [ -e /var/run/sshd.pid ]; then
    kill `cat /var/run/sshd.pid`
    sleep 1
  fi
  $0 start
}
