--- gnutls-1.2.4/lib/gnutls_compress_int.c	2005-06-07 11:58:09.595990000 -0400
+++ gnutls/lib/gnutls_compress_int.c	2005-06-07 11:59:11.851880750 -0400
@@ -108,9 +108,7 @@ comp_hd_t _gnutls_comp_init(gnutls_compr
 
 	    if (ret->handle == NULL) {
 		gnutls_assert();
-	      cleanup_ret:
-		gnutls_free(ret);
-		return NULL;
+		goto cleanup_ret;
 	    }
 	}
 
@@ -120,6 +118,10 @@ comp_hd_t _gnutls_comp_init(gnutls_compr
 	break;
     }
     return ret;
+
+cleanup_ret:
+	gnutls_free(ret);
+	return NULL;
 }
 
 void _gnutls_comp_deinit(comp_hd_t handle, int d)
