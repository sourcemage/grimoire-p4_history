# repertory for bitlbee to store personnal datas of each user
# allow bitlbee to write in by changing owner
if ! [ -d /var/lib/bitlbee ]; then
  mkdir /var/lib/bitlbee
  chown nobody.nogroup /var/lib/bitlbee
fi

# default configuration files installation (bitlbee.conf and motd.txt)
# files removed when dispelled if not modified by user
if [ -f /etc/bitlbee/bitlbee.conf ]; then
  echo "A Bitlbee configuration file already exists"
else
  make install-etc
fi

# starting file for super server xinetd (xinetd.d/bitlbee file)
# sorcery is magic, just need this file in the spell

message ""
# maybe automatically with sedit later
message "For now, bitlbee requires inetd or xinetd to launch"
message "if inetd, add the following line to /etc/inetd.conf"
message "6667    stream  tcp     nowait nobody /usr/sbin/bitlbee bitlbee"
message "if xinetd, check the bitlbee file in /etc/xinetd.d/ fits your needs"

# adding a line to /etc/services to allow bitlbee to run
# sorcery is magic, just need a services file in the spell...
message ""
message "A line was added in /etc/services to enable the local bitlbee server"
message "Check your firewall configuration for the 6667 port"

default_post_build
