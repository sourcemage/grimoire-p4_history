#!/bin/bash

PROGRAM=/bin/false
RUNLEVEL=3
NEEDS="+network +remote_fs"

. /etc/init.d/smgl_init

start()
{
  [ ! -d /var/run/httpsd ]  &&  mkdir  /var/run/httpsd
  echo "Starting Apache web server..."
  /usr/sbin/apachectl startssl
  evaluate_retval
}

restart()
{
  echo "Restarting Apache web server..."
  if [ -f /var/run/httpsd/httpd.pid ]; then
    /usr/sbin/apachectl restart
    evaluate_retval
  else
    run_func start
  fi
}

stop()
{
  echo "Stopping Apache web server..."
  /usr/sbin/apachectl stop
  evaluate_retval
}

status()
{
  getpids httpd
  if [ -n "$pidlist" ]; then
    echo "Apache is running with Process ID(s) $pidlist"
  else
    if [ -f  /var/run/httpsd/httpd.pid ]; then
      echo "Apache is not running but /var/run/httpsd/httpd.pid exists"
      return 1
    else
      echo "Apache is not running"
    fi
  fi
}

reload()
{
  run_func restart
}
