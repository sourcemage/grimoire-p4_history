#
# This is crucial to upgrading glibc, please think twice before changing a single thing
# (hgg - 2004/01/21)
#
# Move this into a seperate function out of BUILD to make the prepare_install/make
# install section more readable
#

function  make_install_links()  {
  ln  -sf  $SOURCE_DIRECTORY.bld/libc.so                    \
           ${INSTALL_ROOT}/lib/libc.so.6                    &&
  ln  -sf  $SOURCE_DIRECTORY.bld/rt/librt.so                \
           ${INSTALL_ROOT}/lib/librt.so.1                   &&
  ln  -sf  $SOURCE_DIRECTORY.bld/math/libm.so               \
           ${INSTALL_ROOT}/lib/libm.so.6                    &&
  ln  -sf  $SOURCE_DIRECTORY.bld/dlfcn/libdl.so             \
           ${INSTALL_ROOT}/lib/libdl.so.2                   &&
  ln  -sf  $SOURCE_DIRECTORY.bld/nis/libnsl.so              \
           ${INSTALL_ROOT}/lib/libnsl.so.1                  &&
  ln  -sf  $SOURCE_DIRECTORY.bld/nis/libnss_compat.so       \
           ${INSTALL_ROOT}/lib/libnss_compat.so.2           &&
  ln  -sf  $SOURCE_DIRECTORY.bld/nis/libnss_nis.so          \
           ${INSTALL_ROOT}/lib/libnss_nis.so.2              &&
  ln  -sf  $SOURCE_DIRECTORY.bld/nis/libnss_nisplus.so      \
           ${INSTALL_ROOT}/lib/libnss_nisplus.so.2          &&
  ln  -sf  $SOURCE_DIRECTORY.bld/nss/libnss_files.so        \
           ${INSTALL_ROOT}/lib/libnss_files.so.2            &&
  ln  -sf  $SOURCE_DIRECTORY.bld/malloc/libmemusage.so      \
           ${INSTALL_ROOT}/lib/libmemusage.so               &&
  ln  -sf  $SOURCE_DIRECTORY.bld/crypt/libcrypt.so          \
           ${INSTALL_ROOT}/lib/libcrypt.so.1                &&
  ln  -sf  $SOURCE_DIRECTORY.bld/login/libutil.so           \
           ${INSTALL_ROOT}/lib/libutil.so.1                 &&
  ln  -sf  $SOURCE_DIRECTORY.bld/resolv/libresolv.so        \
           ${INSTALL_ROOT}/lib/libresolv.so.2               &&
  ln  -sf  $SOURCE_DIRECTORY.bld/resolv/libanl.so           \
           ${INSTALL_ROOT}/lib/libanl.so.1                  &&
  ln  -sf  $SOURCE_DIRECTORY.bld/resolv/libnss_dns.so       \
           ${INSTALL_ROOT}/lib/libnss_dns.so.2              &&
  ln  -sf  $SOURCE_DIRECTORY.bld/locale/libBrokenLocale.so  \
           ${INSTALL_ROOT}/lib/libBrokenLocale.so.1         &&
  ln  -sf  $SOURCE_DIRECTORY.bld/hesiod/libnss_hesiod.so    \
           ${INSTALL_ROOT}/lib/libnss_hesiod.so.2           &&
  if  [  "$GLIBC_NPTL"  =  "y"  ];  then
    ln  -sf  $SOURCE_DIRECTORY.bld/nptl/libpthread.so  \
             ${INSTALL_ROOT}/lib/libpthread.so.0 
  else
    ln  -sf  $SOURCE_DIRECTORY.bld/linuxthreads/libpthread.so  \
             ${INSTALL_ROOT}/lib/libpthread.so.0 
 fi  &&
 [[  `uname -m`  =  ppc*  ]]                                               &&
 ln -sf $SOURCE_DIRECTORY.bld/elf/ld.so ${INSTALL_ROOT}/lib/ld.so.1        ||
 ln -sf $SOURCE_DIRECTORY.bld/elf/ld.so ${INSTALL_ROOT}/lib/ld-linux.so.2
}
