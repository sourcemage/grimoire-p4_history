#!/bin/bash

PROGRAM=/usr/bin/mythbackend
RUNLEVEL=3
NEEDS="+remote_fs"

. /etc/init.d/smgl_init
. /etc/sysconfig/mythtv


start() {
  # Check if mythbackend is already running
  if  [  !  -f /var/lock/subsys/${MBE_PROG}  ];  then
    echo  "Starting mythtv: "
    daemon --user ${MBE_USER} ${MBE_LOCATION}${MBE_PROG} -d -l ${MBE_LOGFILE}
    evaluate_retval
    [ $RETVAL -eq 0 ] && touch /var/lock/subsys/${MBE_PROG}
  fi
  evaluate_retval
}

stop() {
  echo  "Stopping mythtv: "
  killproc  ${MBE_LOCATION}${MBE_PROG}
  evaluate_retval
  [ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/${MBE_PROG}
  evaluate_retval
}

status() {
  status  ${MBE_LOCATION}${MBE_PROG}
}
